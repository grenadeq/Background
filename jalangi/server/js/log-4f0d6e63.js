!function(e,t){"function"==typeof define&&define.amd?define("log",["jquery","debug","jquery.throttle"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("debug"),require("jquery.throttle")):e.Log=t(e.jquery,e.debug,e.jquery.throttle)}(this,function(e,t,r){function n(){this.isGaEnabled=!0}var a="object"==typeof window&&"object"==typeof document,o="function"==typeof t?t("log"):function(){};"undefined"==typeof RRC&&(RRC={fr:"bd_other",city:"cn"});var c="_",i="-";n._getEventName=function(t,r){var n=e.trim(t.attr(r));if(n){var a=[n];return t.parents("[rrc-event-scope]").each(function(){var t=e.trim(e(this).attr("rrc-event-scope"));t&&a.push(t)}),a.reverse(),a.join(c)}return""},n._getParentPageModule=function(e){var t=e.parents("[rrc-page-module]").eq(0);return 0!==t.length?n._getEventName(t,"rrc-event-scope"):""},n._isVisible=function(t,r){if("none"===t.css("display")||"hidden"===t.css("visibility")||"0"===t.css("opacity"))return!1;if(r)return!0;var n=e(window),a=t.offset().top,o=t.outerHeight(),c=n.height(),i=n.scrollTop();return i+c>a&&i<a+o},n.push=function(t){if(o("log.push",t),a!==!1){var r=this,n=t[2],c={};if("undefined"==typeof t[3]&&(t[3]=""),"undefined"==typeof t[4]&&(t[4]=""),"undefined"==typeof t[5]&&(t[5]={}),"object"==typeof n)n.fr=RRC.fr,n.city=RRC.city,c={event:t[1],content:n};else{c={event:t[1],content:{type:t[2],param:t[3],pageModule:t[4],fr:RRC.fr,city:RRC.city,expand:t[5]}};try{var i=e.parseJSON(t[3]);"object"===e.type(i)&&(c.content.param=i)}catch(u){}}"object"==typeof t[2]?window._rls&&window._rls.push([t[0],t[1],c]):(window.ga&&r.isGaEnabled&&window.ga("send","event",t[1],t[2],t[3],t[4]),window._hmt&&window._hmt.push(t),window._rls&&window._rls.push([t[0],t[1],c]))}},n.modulePush=function(t,r){e.each(t,function(){var t=e(this);if(n._isVisible(t,r)&&("true"!==t.attr("rrc-page-module")||r)){var a=n._getEventName(t,"rrc-event-scope");if(a){var o={},c=t.attr("rrc-event-param")||t.attr("rrc-tel-button")||"",i=n._getParentPageModule(t);e.each(t[0].attributes,function(e,t){t.name.indexOf("rrc-event-expand")!==-1&&(o[t.name.replace("rrc-event-expand-","")]=t.nodeValue)}),t.attr("rrc-page-module","true"),n.push(["_trackEvent",a,"rrc-pageModule-show",c,i,o])}}})},n.modulePushLoaded=function(t){e.each(t,function(){var t=e(this);if("true"!==t.attr("rrc-page-module-loaded")){var r=t.attr("rrc-page-module-loaded-name"),a=n._getEventName(t,"rrc-event-scope")+c+r;if(a){var o={},i=t.attr("rrc-event-param")||t.attr("rrc-tel-button")||"";e.each(t[0].attributes,function(e,t){t.name.indexOf("rrc-event-expand")!==-1&&(o[t.name.replace("rrc-event-expand-","")]=t.nodeValue)}),t.attr("rrc-page-module-loaded","true"),n.push(["_trackEvent",a,"",i,"",o])}}})};var u=function(t){return function(r){var a=e(r.currentTarget),o=a.attr("rrc-event-type")||"click",u=a.attr("rrc-event-param")||a.attr("rrc-tel-button")||"",d=e.trim(a.attr("rrc-event-name")),s=n._getParentPageModule(a),f={};if(d&&o===t){var p=[d];a.parents("[rrc-event-scope]").each(function(){var t=e.trim(e(this).attr("rrc-event-scope"));t&&p.push(t)}),p.reverse(),e.each(r.currentTarget.attributes,function(e,t){t.name.indexOf("rrc-event-expand")!==-1&&(f[t.name.replace("rrc-event-expand-","")]=t.nodeValue)});var l=p.shift();n.push(["_trackEvent",l+c+p.join(i),o,u,s,f])}}},d=!1;return n.init=function(t){a!==!1&&(d||(d=!0,this.isGaEnabled=t,e(document).ready(function(){var t=e("body"),r=e("[rrc-event-no-bubble]"),a=e("[rrc-page-module]"),o=e("[rrc-page-module-loaded]");t.on("click","[rrc-event-name]",u("click")),t.on("focusin","[rrc-event-name]",u("focus")),r.on("click",u("click")),r.on("focus",u("focus")),n.modulePush(a),n.modulePushLoaded(o),e.each(["show","hide","fadeIn"],function(t,r){var n=e.fn[r];e.fn[r]=function(){var e=n.apply(this,arguments);return this.trigger(r,this),e}}),e.each(["append","prepend","html"],function(t,r){var o=e.fn[r];e.fn[r]=function(){var t=o.apply(this,arguments);a=e("[rrc-page-module]");var r=e(this).find("[rrc-page-module]"),c=e(this).find("[rrc-page-module-loaded]");return n.modulePush(r),n.modulePushLoaded(c),t}}),t.on("show fadeIn","[rrc-page-module]",function(t,r){var a=e(t.currentTarget);if(a.is(r)){var o=a.attr("rrc-page-module-repeatable");n.modulePush(a,o)}}),e(window).on("scroll",e.throttle(200,function(){n.modulePush(a)}))})))},n});