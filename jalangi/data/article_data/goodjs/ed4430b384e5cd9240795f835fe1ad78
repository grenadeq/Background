
!function(t,e,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.Fingerprint=n()}(0,this,function(){"use strict";var t=function(t){var e,n;e=Array.prototype.forEach,n=Array.prototype.map,this.each=function(t,n,r){if(null!==t)if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===+t.length){for(var a=0,o=t.length;a<o;a++)if(n.call(r,t[a],a,t)==={})return}else for(var i in t)if(t.hasOwnProperty(i)&&n.call(r,t[i],i,t)==={})return},this.map=function(t,e,r){var a=[];return null==t?a:n&&t.map===n?t.map(e,r):(this.each(t,function(t,n,o){a[a.length]=e.call(r,t,n,o)}),a)},"object"==typeof t?(this.hasher=t.hasher,this.screen_resolution=t.screen_resolution,this.canvas=t.canvas,this.ie_activex=t.ie_activex):"function"==typeof t&&(this.hasher=t)};return t.prototype={get:function(){var t=[];try{t.push(navigator.userAgent),document.getElementById("useragent").value=navigator.userAgent}catch(t){}try{t.push(navigator.language)}catch(t){alert("Errore in language:"+t.message)}try{t.push(screen.colorDepth),document.getElementById("color").value=screen.colorDepth}catch(t){}try{this.screen_resolution&&void 0!==this.getScreenResolution()&&(t.push(this.getScreenResolution().join("x")),document.getElementById("screen").value=this.getScreenResolution().join("x"))}catch(t){}try{t.push((new Date).getTimezoneOffset()),document.getElementById("timezone").value=(new Date).getTimezoneOffset()}catch(t){}try{t.push(this.hasSessionStorage()),document.getElementById("sessionstorage").value=this.hasSessionStorage()}catch(t){}try{t.push(this.hasLocalStorage()),document.getElementById("localstorage").value=this.hasLocalStorage()}catch(t){}try{t.push(!!window.indexedDB)}catch(t){}try{document.body?t.push(typeof document.body.addBehavior):t.push("undefined")}catch(t){}try{t.push(typeof window.openDatabase)}catch(t){}try{t.push(navigator.cpuClass),document.getElementById("cpu").value=navigator.cpuClass}catch(t){}try{t.push(navigator.platform),document.getElementById("platform").value=navigator.platform}catch(t){}try{t.push(navigator.doNotTrack),document.getElementById("donottrack").value=navigator.doNotTrack}catch(t){}try{this.plugin&&t.push(this.getPluginsString()),document.getElementById("plugin").value=this.getPluginsString()}catch(t){}try{this.canvas&&this.isCanvasSupported()&&(t.push(this.getCanvasFingerprint()),document.getElementById("canvas").value=this.getCanvasFingerprint())}catch(t){}try{if(this.hasher)try{return this.hasher(t.join("###"),31)}catch(t){}else try{return this.murmurhash3_32_gc(t.join("###"),31)}catch(t){}}catch(t){}},murmurhash3_32_gc:function(t,e){var n,r,a,o,i,c,s,u;for(n=3&t.length,r=t.length-n,a=e,i=3432918353,c=461845907,u=0;u<r;)s=255&t.charCodeAt(u)|(255&t.charCodeAt(++u))<<8|(255&t.charCodeAt(++u))<<16|(255&t.charCodeAt(++u))<<24,++u,a=27492+(65535&(o=5*(65535&(a=(a^=s=(65535&(s=(s=(65535&s)*i+(((s>>>16)*i&65535)<<16)&4294967295)<<15|s>>>17))*c+(((s>>>16)*c&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(s=0,n){case 3:s^=(255&t.charCodeAt(u+2))<<16;case 2:s^=(255&t.charCodeAt(u+1))<<8;case 1:a^=s=(65535&(s=(s=(65535&(s^=255&t.charCodeAt(u)))*i+(((s>>>16)*i&65535)<<16)&4294967295)<<15|s>>>17))*c+(((s>>>16)*c&65535)<<16)&4294967295}return a^=t.length,a^=a>>>16,a=2246822507*(65535&a)+((2246822507*(a>>>16)&65535)<<16)&4294967295,a^=a>>>13,a=3266489909*(65535&a)+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(t){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(t){return!0}},isCanvasSupported:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(t){var e=this.map(t,function(t){return[t.type,t.suffixes].join("~")}).join(",");return[t.name,t.description,e].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var t=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(t,function(t){try{return new ActiveXObject(t),t}catch(t){return null}}).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n="http://valve.github.io";return e.textBaseline="top",e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText(n,2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText(n,4,17),t.toDataURL()}},t});
